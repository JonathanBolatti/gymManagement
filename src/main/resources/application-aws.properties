# Configuración para AWS
# Este perfil se usa cuando la aplicación se despliega en AWS

# Configuración de base de datos RDS MySQL
spring.datasource.url=jdbc:mysql://${RDS_ENDPOINT:gym-management-dev-db.ca9qcqg66h2q.us-east-1.rds.amazonaws.com:3306}/${RDS_DB_NAME:gym_management}?useSSL=true&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=${RDS_USERNAME:gymuser}
spring.datasource.password=${RDS_PASSWORD:gympass123!}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Pool de conexiones optimizado para AWS
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:10}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:2}
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# Configuración JPA para producción
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# Configuración de logging para AWS
logging.level.com.gym_management.system=INFO
logging.level.org.springframework.web=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# Configuración de AWS
aws.region=${AWS_REGION:us-east-1}
aws.s3.bucket-name=${S3_BUCKET_NAME:gym-management-dev-bucket-1753414783}
aws.s3.url-expiration-time=${S3_URL_EXPIRATION:3600}

# CloudWatch configuration
aws.cloudwatch.namespace=${CLOUDWATCH_NAMESPACE:gym-management-dev}
aws.cloudwatch.metric-resolution=${CLOUDWATCH_METRIC_RESOLUTION:60}

# Configuración de servidor para AWS
server.port=${SERVER_PORT:8080}
server.servlet.context-path=/
server.forward-headers-strategy=native

# Configuración de actuator para AWS
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.endpoint.health.probes.enabled=true
management.health.livenessstate.enabled=true
management.health.readinessstate.enabled=true

# Métricas adicionales para monitoreo
management.metrics.export.cloudwatch.enabled=${CLOUDWATCH_METRICS_ENABLED:true}
management.metrics.export.cloudwatch.namespace=${CLOUDWATCH_NAMESPACE:GymManagement}
management.metrics.export.cloudwatch.step=${CLOUDWATCH_STEP:PT1M}

# Configuración de seguridad para AWS
server.ssl.enabled=${SSL_ENABLED:false}
server.ssl.key-store=${SSL_KEY_STORE:}
server.ssl.key-store-password=${SSL_KEY_STORE_PASSWORD:}
server.ssl.key-store-type=${SSL_KEY_STORE_TYPE:PKCS12}

# Configuración de cache (futuro uso con ElastiCache)
spring.cache.type=simple
# spring.redis.host=${REDIS_HOST:localhost}
# spring.redis.port=${REDIS_PORT:6379}
# spring.redis.password=${REDIS_PASSWORD:}

# Configuración de timezone
spring.jackson.time-zone=UTC 